(window.webpackJsonp=window.webpackJsonp||[]).push([["addContent"],{"2ebd":function(t,e,a){(t.exports=a("2350")(!1)).push([t.i,".edui-default .edui-toolbar{line-height:20px!important}.dr-contentForm{padding:20px}.dr-contentForm .lq-refresh-button{width:32px;height:32px}.dr-contentForm .post-rate .el-rate{margin-top:10px}.dr-contentForm .navigation-title{width:30%}.dr-contentForm .navigation-url{width:70%}.dr-contentForm .el-select .el-input{width:100px}.dr-contentForm .dr-submitContent{position:fixed;z-index:9999999;padding:10px 30px;text-align:right;right:0;bottom:0;background:none;margin-bottom:0}.dr-contentForm .avatar-uploader .el-upload{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden}.dr-contentForm .avatar-uploader .el-upload:hover{border-color:#409eff}.dr-contentForm .avatar-uploader-icon{font-size:28px;color:#8c939d;width:200px;height:150px;line-height:150px!important;text-align:center}.dr-contentForm .avatar{width:200px;height:158px;display:block}.dr-contentForm .upSimg{position:relative}.dr-contentForm .upSimg .refresh-btn{position:absolute;left:220px;top:0}.dr-contentForm .upSimg .refresh-btn i{font-weight:400}.dr-contentForm .covers-list .el-col{height:100px;margin-bottom:15px}.dr-contentForm .covers-list .el-col .grid-img{border-radius:4px;overflow:hidden;height:100%;cursor:pointer;position:relative}.dr-contentForm .covers-list .el-col .grid-img .cover{display:none}.dr-contentForm .covers-list .el-col .grid-img .cover span{position:absolute;top:50%;left:50%;display:inline-block;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);color:#fff;font-size:12px;width:60px}.dr-contentForm .covers-list .el-col .grid-img .cover span svg{margin-right:4px}.dr-contentForm .covers-list .el-col .grid-img .cover .showMoreCover{color:#aaa;text-align:center;border:1px solid #eee;border-radius:50%;width:50px;height:50px;line-height:50px;-webkit-box-shadow:0 2px 12px 0 rgba(0,0,0,.1);box-shadow:0 2px 12px 0 rgba(0,0,0,.1);font-size:15px}.dr-contentForm .covers-list .el-col .grid-img img{width:100%;height:100%}.dr-contentForm .covers-list .preview{position:relative;padding-left:0!important;padding-right:0!important}.dr-contentForm .covers-list .preview .grid-img{overflow:hidden;height:100%}.dr-contentForm .covers-list .preview .grid-img .cover-title{overflow:hidden;word-break:break-word;font-family:fzlthjt}.dr-contentForm.mobile .covers-list .preview{width:300px!important;height:200px!important}.dr-contentForm.mobile .covers-list .el-col{height:50px!important}",""])},5534:function(t,e,a){(t.exports=a("2350")(!1)).push([t.i,".cover-dialog .el-dialog__body{padding-top:0!important}.dialog-covers-list{height:300px;overflow:hidden}.dialog-covers-list .el-col{height:60px;margin-bottom:15px}.dialog-covers-list .el-col .grid-img{background:#000;border-radius:4px;overflow:hidden;height:100%;cursor:pointer;position:relative}.dialog-covers-list .el-col .grid-img .cover{display:none}.dialog-covers-list .el-col .grid-img .cover span{position:absolute;top:50%;left:50%;display:inline-block;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);color:#fff;font-size:12px;width:60px}.dialog-covers-list .el-col .grid-img .cover span svg{margin-right:4px}.dialog-covers-list .el-col .grid-img img{width:100%;height:100%}.dialog-covers-list .preview{width:400px;height:269px;position:relative;padding-left:0!important;padding-right:0!important}.dialog-covers-list .preview .grid-img{overflow:hidden;height:100%}.dialog-covers-list .preview .grid-img .cover-title{overflow:hidden;word-break:break-word;font-family:fzlthjt}",""])},6258:function(t,e,a){"use strict";var r=a("ac8f");a.n(r).a},"660e":function(t,e,a){"use strict";var r=a("bf2a");a.n(r).a},9856:function(t,e,a){"use strict";a.r(e);a("8e6e"),a("ac6a"),a("456d"),a("a481"),a("28a5"),a("c5f6");var r=a("bd86"),o=(a("96cf"),a("3b8d")),i=(a("7f7f"),a("6b54"),a("6625")),s=a.n(i),n=a("330f"),c=a("cc48"),l=a("60bb"),d=a.n(l),m=a("5880"),p={props:{device:String,pageInfo:Object,pageType:String},methods:{renderPageList:function(t,e){var a=0<arguments.length&&void 0!==t?t:1,r=1<arguments.length&&void 0!==e?e:10,o=this.pageInfo?this.pageInfo.type:"";this.$store.dispatch("content/getContentCoverList",{current:a,pageSize:r,type:o})},handleSizeChange:function(t){var e=this.pageInfo?this.pageInfo.current:1;this.renderPageList(e,t)},handleCurrentChange:function(t){var e=this.pageInfo?this.pageInfo.pageSize:10;this.renderPageList(t,e)}},data:function(){return{}}},g=(a("cdac"),a("2877")),u=Object(g.a)(p,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"block dr-pagination"},[e.pageInfo?a("div",["mobile"==e.device?a("div",[a("el-pagination",{attrs:{"current-page":e.pageInfo.current,"page-size":e.pageInfo.pageSize,small:"",layout:"prev, pager, next",total:e.pageInfo.totalItems},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.pageInfo,"current",t)},"update:current-page":function(t){return e.$set(e.pageInfo,"current",t)}}})],1):a("div",[a("el-pagination",{attrs:{"current-page":e.pageInfo.current,"page-sizes":[30,50],"page-size":e.pageInfo.pageSize,layout:"sizes, prev, pager, next",total:e.pageInfo.totalItems},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.pageInfo,"current",t)},"update:current-page":function(t){return e.$set(e.pageInfo,"current",t)}}})],1)]):e._e()])},[],!1,null,null,null).exports;function f(e,t){var a,r=Object.keys(e);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(e),t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)),r}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach(function(t){Object(r.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var v={props:{dialogState:Object,targetCover:Object,coverTypeList:Array,device:String},data:function(){return{targetCoverList:[]}},computed:h(h({},Object(m.mapGetters)(["contentCoverList"])),{},{formState:function(){return this.$store.getters.contentFormState},coverActiveStyle:function(){return{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.4)",display:"block"}},currentType:function(){return d.a.isEmpty(this.contentCoverList)||d.a.isEmpty(this.contentCoverList.docs)?"":this.contentCoverList.docs[0].type._id}}),components:{CoverPagination:u},methods:{handleTypeClick:function(t){var e=this.coverTypeList[t.index];this.$store.dispatch("content/getContentCoverList",{type:e._id,pageSize:30})},selectThisCover:function(t){d.a.isEmpty(t)||(this.$emit("updateTargetCover",t),this.$store.dispatch("content/showContentForm",{edit:this.formState.edit,formData:Object.assign({},this.formState.formData,{cover:t._id})}),this.$store.dispatch("content/hideCoverListDialog"))}},mounted:function(){}},b=(a("660e"),Object(g.a)(v,function(){var a=this,t=a.$createElement,r=a._self._c||t;return r("div",{class:"dr-contentCoverForm "+a.device},[r("el-dialog",{staticClass:"cover-dialog",attrs:{xs:20,sm:20,md:4,lg:4,xl:4,title:"选择封面",width:"60%",visible:a.dialogState.show,"close-on-click-modal":!1},on:{"update:visible":function(t){return a.$set(a.dialogState,"show",t)}}},[r("el-tabs",{staticStyle:{height:"400px"},attrs:{"tab-position":"top"},on:{"tab-click":a.handleTypeClick},model:{value:a.currentType,callback:function(t){a.currentType=t},expression:"currentType"}},a._l(a.coverTypeList,function(t){return r("el-tab-pane",{key:t._id,attrs:{name:t._id,label:t.name}},[r("el-row",{staticClass:"dialog-covers-list",staticStyle:{"padding-left":"10px"},attrs:{gutter:20}},a._l(a.contentCoverList.docs,function(e){return r("el-col",{key:e._id,attrs:{xs:8,md:3}},[r("div",{staticClass:"grid-img",style:e.backgroundDefaultCss?JSON.parse(e.backgroundDefaultCss):"",on:{click:function(t){return a.selectThisCover(e)}}},[r("img",{attrs:{src:e.cover}}),r("div",{staticClass:"cover",style:a.formState.formData.cover==e._id?a.coverActiveStyle:{}},[r("span",[r("svg-icon",{attrs:{"icon-class":"icon_check_right"}}),a._v("已选择\n                ")],1)])])])}),1),r("CoverPagination",{attrs:{device:a.device,pageInfo:a.contentCoverList.pageInfo}})],1)}),1)],1)],1)},[],!1,null,null,null).exports),y=a("e9d9"),C=a("c0e9"),w=a.n(C);function S(e,t){var a,r=Object.keys(e);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(e),t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)),r}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach(function(t){Object(r.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var $={props:{groups:Array},data:function(){var r=this;return{tagTypes:["","success","info","warning","danger"],navigationTitle:"",navigation:"",navigations:[],navigationsSelect:"Https://",dataURL:"",coverImg:"",targetCover:"",coverTypeList:[],wordFileList:[],wordFileUrl:"",sidebarOpened:!0,device:"desktop",contentState:[{value:"0",label:"退回"},{value:"1",label:"待审核"},{value:"2",label:"审核通过"},{value:"3",label:"审核不通过"}],selectUserList:[],loading:!1,userLoading:!1,selectSpecialList:[],selectCoverList:[],content:"",simpleComments:"",isflash:!1,config:{initialFrameWidth:null,initialFrameHeight:320},editorConfig:{autoHeightEnabled:!1,saveInterval:"10000",initialFrameHeight:600,initialFrameWidth:"100%",serverUrl:"/api/upload/ueditor",UEDITOR_HOME_URL:this.$root.staticRootPath+"/plugins/ueditor/",toolbars:[["source","undo","redo","bold","indent","italic","underline","strikethrough","subscript","fontborder","superscript","blockquote","emotion","spechars","justifyleft","justifyright","justifycenter","justifyjustify","insertorderedlist","insertunorderedlist","directionalityltr","directionalityrtl","rowspacingtop","rowspacingbottom","lineheight","touppercase","tolowercase","forecolor","backcolor","inserttable","edittable","insertrow","insertcol","mergeright","mergedown","deleterow","deletecol","splittorows","splittocols","splittocells","deletecaption","mergecells","deletetable","insertparagraphbeforetable","edittd","customstyle","insertcode","fontfamily","fontsize","paragraph","simpleupload","insertimage","imagenone","imageleft","imageright","imagecenter","wordimage","background","anchor","selectall","print","preview","horizontal","removeformat","time","date","inserttitle","cleardoc","link","unlink","searchreplace","map","gmap","fullscreen","pagebreak","attachment","autotypeset","scrawl","drafts","help"]]},imageUrl:"",categoryProps:{value:"_id",label:"name",children:"children"},currentType:"1",rules:{targetUser:[{required:!0,message:this.$t("validate.selectNull",{label:"指定用户"}),trigger:"blur"}],sImg:[{required:!0,message:this.$t("validate.selectNull",{label:"缩略图"}),trigger:"blur"}],categories:[{required:!0,message:this.$t("validate.selectNull",{label:this.$t("contents.categories")}),trigger:"blur"}],title:[{required:!0,message:this.$t("validate.inputNull",{label:this.$t("contents.title")}),trigger:"blur"},{min:2,max:50,message:this.$t("validate.rangelength",{min:2,max:50}),trigger:"blur"}],stitle:[{required:!0,message:this.$t("validate.inputNull",{label:this.$t("contents.stitle")}),trigger:"blur"},{min:2,max:50,message:this.$t("validate.rangelength",{min:2,max:50}),trigger:"blur"}],tags:[{required:!0,message:this.$t("validate.inputNull",{label:this.$t("contents.tags")}),trigger:"blur"},{validator:function(t,e,a){d.a.isEmpty(e)?a(new Error(r.$t("validate.selectNull",{label:r.$t("contents.tags")}))):a()},trigger:"change"}],discription:[{required:!0,message:this.$t("validate.inputNull",{label:this.$t("contents.discription")}),trigger:"blur"},{min:5,max:300,message:this.$t("validate.rangelength",{min:5,max:100}),trigger:"blur"}],comments:[{required:!0,message:this.$t("validate.inputNull",{label:this.$t("contents.comments")}),trigger:"blur"},{min:5,message:this.$t("validate.rangelength",{min:5,max:1e5}),trigger:"blur"}]}}},components:{VueUeditorWrap:s.a,CoverTable:b},methods:{refreshCategories:function(){this.$store.dispatch("contentCategory/getContentCategoryList")},refreshTags:function(){this.$store.dispatch("contentTag/getContentTagList",{pageSize:200})},addNavigation:function(){this.navigation&&this.navigationTitle&&this.navigations.push({title:this.navigationTitle,url:this.navigationsSelect+this.navigation})},deleteNavigation:function(t){this.navigations.splice(t,1)},moveForwardNavigation:function(t){var e=this.navigations[t-1],a=this.navigations[t];e&&a&&(this.navigations.splice(t,1,e),this.navigations.splice(t-1,1,a))},backNavigation:function(t){var e=this.navigations[t],a=this.navigations[t+1];e&&a&&(this.navigations.splice(t,1,a),this.navigations.splice(t+1,1,e))},updateTargetCover:function(t){this.targetCover=t},showMoreCovers:function(){var t;this.$store.dispatch("content/showCoverListDialog"),d.a.isEmpty(this.coverTypeList)||(t=d.a.isEmpty(this.targetCover)?this.coverTypeList[0]._id:this.targetCover.type._id,this.$store.dispatch("content/getContentCoverList",{type:t,pageSize:30}))},htmlToImage:function(){return new Promise(function(r,o){var t=document.getElementsByClassName("preview")[0],e=t.offsetWidth,a=t.offsetHeight,i=document.createElement("canvas");t.getBoundingClientRect();i.width=+e,i.height=+a;var s=i.getContext("2d");s.scale(1,1);var n=window.scrollY;s.translate(0,-n);var l={scale:1,canvas:i,width:e,height:a,taintTest:!0,useCORS:!0,dpi:window.devicePixelRatio,background:"#fff"};w()(t,l).then(function(t){var e=t.toDataURL("image/png",1),a={base64:e.toString().substring(e.indexOf(",")+1)};Object(c.p)(a).then(function(t){200===t.status?r(t.data):o(t.message)})})})},selectThisCover:function(t){d.a.isEmpty(t)||(this.targetCover=t,this.formState.formData.cover=t._id)},handleWordRemove:function(){},handleWordPreview:function(){},handleWordExceed:function(t,e){this.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(t.length," 个文件，共选择了 ").concat(t.length+e.length," 个文件"))},beforeWordRemove:function(t){return this.$confirm("确定移除 ".concat(t.name,"？"))},uploadWordSuccess:function(t){Object(y.b)(),this.wordFileUrl=t.data?t.data:"",this.ueditorObj.setContent(t.data),this.$message({message:"恭喜，导入成功！",type:"success"})},beforeWordUpload:function(t){var e=t.size/1024/1024<5;return-1===t.type.indexOf("officedocument")&&this.$message.warning(this.$t("message.docx_warn")),e||this.$message.error(this.$t("validate.limitUploadImgSize",{size:5})),e&&Object(y.a)(),e},queryUserListByParams:function(t){var e=0<arguments.length&&void 0!==t?t:{},a=this;Object(c.j)(e).then(function(t){var e=t.data.docs;e?(a.selectUserList=e.map(function(t){return{value:t._id,label:t.userName}}),a.userLoading=!1):a.selectUserList=[]}).catch(function(t){a.selectUserList=[]})},getRandomContentImg:function(t){var r=this,e=0<arguments.length&&void 0!==t?t:{};Object(c.h)(e).then(function(t){var e,a;200==t.status&&t&&t.data&&(e=t.data[0],a=Object.assign({},r.formState.formData,{sImg:e}),r.$store.dispatch("content/showContentForm",{formData:a}))}).catch(function(t){})},queryCoverListByParams:function(t){var a=this,e=0<arguments.length&&void 0!==t?t:{},r=this;Object(c.e)(e).then(function(t){var e=t.data.docs;e?(r.selectCoverList=e,setTimeout(function(){a.$route.params.id?Object(c.d)({id:r.formState.formData.cover}).then(function(t){d.a.isEmpty(t)||(r.targetCover=t.data,r.formState.formData.cover=t.data._id)}):(r.targetCover=e[0],r.formState.formData.cover=e[0]._id)},1e3)):r.selectCoverList=[]}).catch(function(t){r.selectUserList=[]})},queryCoverTypeListByParams:function(t){var e=0<arguments.length&&void 0!==t?t:{},r=this;Object(c.b)(e).then(function(t){var e,a=t.data;a?(r.coverTypeList=a,e=d.a.filter(a,function(t){return t.isDefault}),d.a.isEmpty(e)||r.queryCoverListByParams({type:e[0]._id})):r.coverTypeList=[]}).catch(function(t){r.coverTypeList=[]})},checkFlashPost:function(t){this.$store.dispatch("content/showContentForm",{edit:this.formState.edit,formData:Object.assign({},this.formState.formData,{type:t?"2":"1"})})},inputEditor:function(t){this.$store.dispatch("content/showContentForm",{edit:this.formState.edit,formData:Object.assign({},this.formState.formData,{markDownComments:t})})},changeEditor:function(){},getLocalContents:function(){var t=localStorage.getItem("addContent")||"";return t?JSON.parse(t):{}},editorReady:function(t){this.ueditorObj=t},handleAvatarSuccess:function(t){var e=t.data.path;this.$store.dispatch("content/showContentForm",{edit:this.formState.edit,formData:Object.assign({},this.formState.formData,{sImg:e})})},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,a="image/png"===t.type,r="image/gif"===t.type,o=t.size/1024/1024<2;return e||a||r||this.$message.error(this.$t("validate.limitUploadImgType")),o||this.$message.error(this.$t("validate.limitUploadImgSize",{size:2})),(e||a||r)&&o},handleChangeCategory:function(){},backToList:function(){this.$router.push(this.$root.adminBasePath+"/content")},submitForm:function(t,e){var r=this;this.$refs[t].validate(function(){var e=Object(o.a)(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=25;break}if(t.prev=1,a=Object.assign({navigations:r.navigations},r.formState.formData,{comments:r.ueditorObj.getContent(),simpleComments:r.ueditorObj.getPlainTxt()}),"1"==r.formState.formData.sImgType)return t.next=6,r.htmlToImage();t.next=7;break;case 6:a.sImg=t.sent;case 7:if(!r.formState.edit){t.next=11;break}Object(c.l)(a).then(function(t){200===t.status?r.$message({message:r.$t("main.updateSuccess"),type:"success"}):r.$message.error(t.message)}),t.next=18;break;case 11:if(d.a.isEmpty(r.adminUserInfo)||d.a.isEmpty(r.adminUserInfo.targetEditor)){t.next=15;break}a.targetUser=r.adminUserInfo.targetEditor._id,t.next=17;break;case 15:return r.$message.error("在添加文档之前，您需要指定一个默认编辑！"),t.abrupt("return",!1);case 17:Object(c.a)(a).then(function(t){200===t.status?(r.$router.push(r.$root.adminBasePath+"/content"),r.$message({message:r.$t("main.addSuccess"),type:"success"})):r.$message.error(t.message)});case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(1),r.$message.error(t.t0.message);case 23:t.next=27;break;case 25:return t.abrupt("return",!1);case 27:case"end":return t.stop()}},t,null,[[1,20]])}));return function(t){return e.apply(this,arguments)}}())}},computed:x(x({},Object(m.mapGetters)(["contentTagList","contentCategoryList","adminUserInfo","contentCoverDialog"])),{},{formState:function(){return this.$store.getters.contentFormState},classObj:function(){return{hideSidebar:!this.sidebarOpened,openSidebar:this.sidebarOpened,withoutAnimation:"false",mobile:"mobile"===this.device}},coverActiveStyle:function(){return{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.4)",display:"block"}},currentStyle:function(){return Object.assign({},{color:this.targetCover.titleColor,fontSize:Number(this.targetCover.titleSize)+"px"})},renderPreviewBackground:function(){if(!this.targetCover)return{};var t=this.targetCover.backgroundDefaultCss,e={backgroundImage:"url("+this.targetCover.cover+")",backgroundSize:"cover",width:this.targetCover.width+"px",height:this.targetCover.height+"px"};return d.a.isEmpty(t)||Object.assign(e,JSON.parse(t)),e},renderPreviewTitle:function(){var t=this.formState.formData.stitle,e=this.targetCover;if(d.a.isEmpty(e)||d.a.isEmpty(e.type))return"";if(t){var a=t.split("--"),r=this.targetCover.type.structure.replace("content_title",t);return 2==a.length&&0<=this.targetCover.type.structure.indexOf("content_title_1")&&(r=this.targetCover.type.structure.replace("content_title",a[0]).replace("content_title_1",a[1])),r}return this.targetCover.type.structure}}),mounted:function(){var o=this;Object(n.a)(this),this.queryCoverTypeListByParams({isDefault:!0}),this.$store.dispatch("adminUser/getUserInfo");var e,a=this;this.$route.params.id?Object(c.g)({id:this.$route.params.id}).then(function(t){var e,a,r;200===t.status?t.data?(e=t.data,a=[],r=[],e.navigations&&(o.navigations=e.navigations),e.categories&&(e.categories.map(function(t,e){t&&a.push(t._id)}),e.categories=a),e.tags&&(e.tags.map(function(t,e){t&&r.push(t._id)}),e.tags=r),e.keywords&&(e.keywords=e.keywords.join()),e.uAuthor&&(o.queryUserListByParams({searchkey:e.uAuthor.userName}),e.targetUser=e.uAuthor._id),o.$store.dispatch("content/showContentForm",{edit:!0,formData:e})):o.$message({message:o.$t("validate.error_params"),type:"warning",onClose:function(){o.$router.push(o.$root.adminBasePath+"/content")}}):o.$message.error(t.message)}):(e=this.getLocalContents(),d.a.isEmpty(e)?this.getRandomContentImg():this.$confirm(this.$t("main.askForReInputContent"),this.$t("main.scr_modal_title"),{confirmButtonText:this.$t("main.confirmBtnText"),cancelButtonText:this.$t("main.cancelBtnText"),type:"warning"}).then(function(){var t=e.comments||"";a.$refs.ueditor.setContent(t),localStorage.removeItem(o.$route.path.split("/")[1]),o.$store.dispatch("content/showContentForm",{edit:!1,formData:e})}).catch(function(){localStorage.removeItem(o.$route.path.split("/")[1]),o.$message({type:"info",message:o.$t("main.scr_modal_del_error_info")})})),this.refreshCategories(),this.refreshTags()}},k=(a("6258"),Object(g.a)($,function(){var a=this,t=a.$createElement,r=a._self._c||t;return r("div",{staticClass:"dr-contentForm",class:a.classObj},[r("CoverTable",{attrs:{coverTypeList:a.coverTypeList,targetCover:a.targetCover,dialogState:a.contentCoverDialog,device:a.device},on:{updateTargetCover:a.updateTargetCover}}),r("div",{staticClass:"main-container"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:a.formState.formData,rules:a.rules,"label-width":"120px","label-position":"mobile"==a.device?"top":"right"}},[r("el-form-item",{attrs:{label:a.$t("contents.enable"),prop:"state"}},[r("el-select",{attrs:{size:"small",placeholder:"审核文章"},model:{value:a.formState.formData.state,callback:function(t){a.$set(a.formState.formData,"state",t)},expression:"formState.formData.state"}},a._l(a.contentState,function(t){return r("el-option",{key:"kw_"+t.value,attrs:{label:t.label,value:t.value}})}),1)],1),"3"==a.formState.formData.state?r("el-form-item",{attrs:{label:"驳回原因",prop:"dismissReason"}},[r("el-input",{attrs:{size:"small"},model:{value:a.formState.formData.dismissReason,callback:function(t){a.$set(a.formState.formData,"dismissReason",t)},expression:"formState.formData.dismissReason"}})],1):a._e(),r("el-form-item",{attrs:{label:a.$t("contents.title"),prop:"title"}},[r("el-input",{attrs:{size:"small"},model:{value:a.formState.formData.title,callback:function(t){a.$set(a.formState.formData,"title",t)},expression:"formState.formData.title"}})],1),r("el-form-item",{attrs:{label:a.$t("contents.categories"),prop:"categories"}},[r("el-cascader",{attrs:{filterable:"",remote:"",size:"small",expandTrigger:"hover",options:a.contentCategoryList.docs,props:a.categoryProps},on:{change:a.handleChangeCategory},model:{value:a.formState.formData.categories,callback:function(t){a.$set(a.formState.formData,"categories",t)},expression:"formState.formData.categories"}}),r("el-button",{staticClass:"lq-refresh-button",attrs:{size:"mini"},on:{click:a.refreshCategories}},[r("i",{staticClass:"el-icon-refresh-right"})])],1),r("el-form-item",{attrs:{label:a.$t("contents.stitle"),prop:"stitle"}},[r("el-input",{attrs:{size:"small"},model:{value:a.formState.formData.stitle,callback:function(t){a.$set(a.formState.formData,"stitle",t)},expression:"formState.formData.stitle"}})],1),r("el-form-item",{attrs:{label:a.$t("contents.keywords"),prop:"keywords"}},[r("el-input",{attrs:{size:"small"},model:{value:a.formState.formData.keywords,callback:function(t){a.$set(a.formState.formData,"keywords",t)},expression:"formState.formData.keywords"}})],1),r("el-form-item",{attrs:{label:a.$t("label.addClickNum"),prop:"clickNum"}},[r("el-input-number",{attrs:{step:"10"},model:{value:a.formState.formData.clickNum,callback:function(t){a.$set(a.formState.formData,"clickNum",t)},expression:"formState.formData.clickNum"}})],1),r("el-form-item",{attrs:{label:a.$t("label.addLikeNum"),prop:"likeNum"}},[r("el-input-number",{attrs:{step:"10"},model:{value:a.formState.formData.likeNum,callback:function(t){a.$set(a.formState.formData,"likeNum",t)},expression:"formState.formData.likeNum"}})],1),r("el-form-item",{attrs:{label:a.$t("contents.tags"),prop:"tags"}},[r("el-select",{attrs:{size:"small",multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:a.$t("validate.selectNull",{label:this.$t("contents.tags")})},model:{value:a.formState.formData.tags,callback:function(t){a.$set(a.formState.formData,"tags",t)},expression:"formState.formData.tags"}},a._l(a.contentTagList.docs,function(t){return r("el-option",{key:t._id,attrs:{label:t.name,value:t._id}})}),1),r("el-button",{staticClass:"lq-refresh-button",attrs:{size:"mini"},on:{click:a.refreshTags}},[r("i",{staticClass:"el-icon-refresh-right"})])],1),r("el-form-item",{attrs:{label:a.$t("contents.sImg"),prop:"sImgType"}},[r("el-radio",{attrs:{label:"2"},model:{value:a.formState.formData.sImgType,callback:function(t){a.$set(a.formState.formData,"sImgType",t)},expression:"formState.formData.sImgType"}},[a._v("上传")]),r("el-radio",{attrs:{label:"1"},model:{value:a.formState.formData.sImgType,callback:function(t){a.$set(a.formState.formData,"sImgType",t)},expression:"formState.formData.sImgType"}},[a._v("自动生成")])],1),"2"==a.formState.formData.sImgType?r("el-form-item",{staticClass:"upSimg",attrs:{label:"",prop:"sImg"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/upload/files","show-file-list":!1,"on-success":a.handleAvatarSuccess,"before-upload":a.beforeAvatarUpload,data:{action:"uploadimage"}}},[a.formState.formData.sImg?r("img",{staticClass:"avatar",attrs:{src:a.formState.formData.sImg}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),r("el-button",{staticClass:"refresh-btn",attrs:{size:"mini",plain:"",round:""},on:{click:function(t){return a.getRandomContentImg()}}},[r("svg-icon",{attrs:{"icon-class":"reload"}})],1)],1):a._e(),"1"==a.formState.formData.sImgType?r("div",[r("el-form-item",{attrs:{label:a.$t("label.selection_basemap"),prop:"covers"}},[r("el-row",{staticClass:"covers-list",staticStyle:{"padding-left":"10px"},attrs:{gutter:20}},[a._l(a.selectCoverList,function(e){return r("el-col",{key:e._id,attrs:{xs:6,md:3}},[r("div",{staticClass:"grid-img",on:{click:function(t){return a.selectThisCover(e)}}},[r("img",{attrs:{src:e.cover}}),r("div",{staticClass:"cover",style:a.formState.formData.cover==e._id?a.coverActiveStyle:{}},[r("span",[r("svg-icon",{attrs:{"icon-class":"icon_check_right"}}),a._v("已选择\n                  ")],1)])])])}),r("el-col",{attrs:{xs:6,md:3}},[r("div",{staticClass:"grid-img",on:{click:function(t){return a.showMoreCovers()}}},[r("div",{staticClass:"cover",staticStyle:{display:"block"}},[r("span",{staticClass:"showMoreCover"},[r("svg-icon",{attrs:{"icon-class":"icon_more"}})],1)])])])],2)],1),r("div",{attrs:{id:"view"}}),r("el-form-item",{attrs:{label:"封面合成预览",prop:"coversPreview"}},[r("div",{staticClass:"covers-list",staticStyle:{marginLeft:"10px"}},[r("div",{staticClass:"preview",style:a.renderPreviewBackground},[r("div",{staticClass:"grid-img"},[r("div",{style:a.currentStyle,domProps:{innerHTML:a._s(a.renderPreviewTitle)}})])])])])],1):a._e(),r("el-form-item",{attrs:{label:a.$t("contents.discription"),prop:"discription"}},[r("el-input",{attrs:{size:"small",type:"textarea"},model:{value:a.formState.formData.discription,callback:function(t){a.$set(a.formState.formData,"discription",t)},expression:"formState.formData.discription"}})],1),r("el-form-item",{attrs:{label:a.$t("contents.uploadWord"),prop:"uploadWord"}},[r("el-upload",{staticClass:"upload-demo",attrs:{action:"/api/content/getWordHtmlContent","on-preview":a.handleWordPreview,"on-remove":a.handleWordRemove,"before-remove":a.beforeWordRemove,"on-success":a.uploadWordSuccess,"before-upload":a.beforeWordUpload,multiple:"",limit:1,"on-exceed":a.handleWordExceed,"file-list":a.wordFileList}},[r("el-button",{attrs:{size:"small",type:"primary"}},[a._v(a._s(a.$t("contents.upload")))]),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[a._v(a._s(a.$t("contents.upload_warn")))])],1)],1),r("el-form-item",{attrs:{label:a.$t("label.header")}},[r("el-input",{attrs:{type:"textarea",rows:3,placeholder:a.$t("placeholder.header")},model:{value:a.formState.formData.header,callback:function(t){a.$set(a.formState.formData,"header",t)},expression:"formState.formData.header"}})],1),r("el-form-item",{attrs:{label:a.$t("label.footer")}},[r("el-input",{attrs:{type:"textarea",rows:3,placeholder:a.$t("placeholder.footer")},model:{value:a.formState.formData.footer,callback:function(t){a.$set(a.formState.formData,"footer",t)},expression:"formState.formData.footer"}})],1),r("el-form-item",{attrs:{label:a.$t("label.navigations")}},[r("el-input",{staticClass:"navigation-title",attrs:{placeholder:a.$t("placeholder.navigation_title"),clearable:""},model:{value:a.navigationTitle,callback:function(t){a.navigationTitle=t},expression:"navigationTitle"}}),r("el-input",{staticClass:"navigation-url",attrs:{placeholder:a.$t("placeholder.navigations")},model:{value:a.navigation,callback:function(t){a.navigation=t},expression:"navigation"}},[r("el-select",{attrs:{slot:"prepend",width:"130px"},slot:"prepend",model:{value:a.navigationsSelect,callback:function(t){a.navigationsSelect=t},expression:"navigationsSelect"}},[r("el-option",{attrs:{label:"Https://",value:"Https://"}}),r("el-option",{attrs:{label:"Http://",value:"Http://"}})],1),r("el-button",{attrs:{slot:"append",icon:"el-icon-plus",title:a.$t("label.addNavigations")},on:{click:a.addNavigation},slot:"append"})],1),r("el-card",{staticClass:"box-card",attrs:{shadow:"hover"}},a._l(a.navigations,function(t,e){return r("div",{key:e,staticClass:"text item"},[r("el-tag",{attrs:{type:a.tagTypes[e%5]}},[a._v(a._s(t.title))]),r("el-tag",{attrs:{closable:"",type:a.tagTypes[e%5]},on:{close:function(t){return a.deleteNavigation(e)}}},[a._v(a._s(t.url))]),r("el-tag",{attrs:{type:a.tagTypes[e%5]},on:{click:function(t){return a.moveForwardNavigation(e)}}},[r("i",{staticClass:"el-icon-top"})]),r("el-tag",{attrs:{type:a.tagTypes[e%5]},on:{click:function(t){return a.backNavigation(e)}}},[r("i",{staticClass:"el-icon-bottom"})])],1)}),0)],1),r("el-form-item",{attrs:{label:a.$t("contents.comments"),prop:"comments"}},[r("vue-ueditor-wrap",{staticClass:"editorForm",attrs:{config:a.editorConfig},on:{ready:a.editorReady},model:{value:a.formState.formData.comments,callback:function(t){a.$set(a.formState.formData,"comments",t)},expression:"formState.formData.comments"}})],1),r("el-form-item",{staticClass:"dr-submitContent"},[r("el-button",{attrs:{size:"medium",type:"primary"},on:{click:function(t){return a.submitForm("ruleForm")}}},[a._v(a._s(a.formState.edit?a.$t("main.form_btnText_update"):a.$t("main.form_btnText_save")))]),r("el-button",{attrs:{size:"medium"},on:{click:a.backToList}},[a._v(a._s(a.$t("main.back")))])],1)],1)],1)],1)},[],!1,null,null,null));e.default=k.exports},ac8f:function(t,e,a){var r=a("2ebd");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,a("499e").default)("37023548",r,!0,{sourceMap:!1,shadowMode:!1})},bf2a:function(t,e,a){var r=a("5534");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,a("499e").default)("52ade0e4",r,!0,{sourceMap:!1,shadowMode:!1})},cdac:function(t,e,a){"use strict";var r=a("cdca");a.n(r).a},cdca:function(t,e,a){var r=a("ed30");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,a("499e").default)("30262d48",r,!0,{sourceMap:!1,shadowMode:!1})},ed30:function(t,e,a){(t.exports=a("2350")(!1)).push([t.i,".dr-pagination{text-align:center;margin:15px auto}",""])}}]);